<div class="card mb-2">
    <div class="card-header fw-bold">Share on the Forums</div>
    <div class="card-body d-grid gap-2">
<textarea class="forum-text-content visually-hidden">
{% if ticket[0].isPublic %}
    {% set ticketUrl = url('ticket.public',{identifier: ticket[0].getIdentifier}) %}
{% else %}
    {% set ticketUrl = url('ticket',{round: ticket[0].getRound,ticket:ticket[0].getNumber}) %}
{% endif %}
{% if not ticket[0].getRecipient %}
	{% set blue = ticket[0].getSender.getCkey() %}
{% else %}
	{% set blue = ticket[0].getRecipient.getCkey() %}
{% endif %}
[b]From Ticket #{{ticket[0].getNumber}} during round [url={{url('round',{round:ticket[0].getRound})}}]{{ticket[0].getRound}}[/url] on {{ticket[0].getServer.getIdentifier}}:[/b]

---- [i] Log Begins [/i] ----
{% for t in ticket %}
{{t.timestamp|date('Y-m-d H:i:s')}}: {% if t.getAction.isAction or 'Interaction' == t.getAction.value %} {{t.message}}
{% elseif blue == t.getSender.getCkey() %}
[color=#0000FF]{{t.getAction.value}} {{t.getAction.verb}} {{t.getSender.getCkey()}}: {{t.message}}[/color]
{% else %}
[color=#FF0000]{{t.getAction.value}} {{t.getAction.verb}} {{t.getSender.getCkey()}}: {{t.message}}[/color]
{% endif %}
{% endfor %}
---- [i] No Further Messages [/i] ----

This ticket can be viewed here: [url]{{ticketUrl}}[/url]
[size=50]This ticket was generated by [url=https://statbus.space/]Statbus[/url] v.{{shivas_app_version}}[/size]
</textarea>
<a class="btn btn-secondary forum-copy-btn" href="#" title="Click to copy"><i class="fas fa-copy"></i> Copy Forum Embed Code</a>
</div>
</div>

<script>
    var forumCopyButton = document.querySelector('.forum-copy-btn')
    var forumTextArea = document.querySelector('.forum-text-content')
    var forumTextContent = forumTextArea.value
    forumCopyButton.addEventListener('click',function(e){
        e.preventDefault()
        window.navigator.clipboard.writeText(forumTextContent)
    })
</script>